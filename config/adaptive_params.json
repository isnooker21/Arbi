{
  "market_regimes": {
    "volatile": {
      "arbitrage_threshold": 0.002,
      "position_size_multiplier": 0.8,
      "recovery_aggressiveness": 0.6,
      "max_triangles": 3,
      "execution_speed_ms": 150,
      "description": "High volatility market - conservative approach"
    },
    "trending": {
      "arbitrage_threshold": 0.0015,
      "position_size_multiplier": 1.2,
      "recovery_aggressiveness": 0.8,
      "max_triangles": 5,
      "execution_speed_ms": 100,
      "description": "Strong trend market - aggressive approach"
    },
    "ranging": {
      "arbitrage_threshold": 0.0008,
      "position_size_multiplier": 1.0,
      "recovery_aggressiveness": 0.7,
      "max_triangles": 7,
      "execution_speed_ms": 80,
      "description": "Range-bound market - balanced approach"
    },
    "normal": {
      "arbitrage_threshold": 0.001,
      "position_size_multiplier": 1.0,
      "recovery_aggressiveness": 0.7,
      "max_triangles": 5,
      "execution_speed_ms": 100,
      "description": "Normal market conditions - standard approach"
    }
  },
  "position_sizing": {
    "custom_risk_percent": 1.0,
    "lot_calculation": {
      "use_simple_mode": false,
      "use_risk_based_sizing": true,
      "risk_per_trade_percent": 1.0,
      "max_loss_pips": 100.0,
      "description": "Risk-Based Sizing: ใช้ risk_per_trade คำนวณ lot อัตโนมัติทั้งหมด - Risk Management แบบถูกต้อง"
    },
    "risk_management": {
      "max_portfolio_risk": 8.0,
      "max_concurrent_groups": 4.0,
      "correlation_limit": 0.8,
      "description": "Risk management parameters - no cut loss, recovery only, optimized for small accounts"
    }
  },
  "recovery_params": {
    "correlation_thresholds": {
      "min_correlation": 0.6,
      "max_correlation": 0.95,
      "optimal_correlation": 0.8,
      "description": "Correlation thresholds for pair selection"
    },
    "loss_thresholds": {
      "min_loss_percent": -0.005,
      "min_price_distance_pips": 10.0,
      "recovery_target": 0.0,
      "use_percentage_based": true,
      "description": "0.5% of balance AND 10 pips distance triggers recovery"
    },
    "timing": {
      "max_recovery_time_hours": 24,
      "recovery_check_interval_seconds": 10,
      "cooldown_between_checks": 10.0,
      "min_position_age_seconds": 60.0,
      "rebalancing_frequency_hours": 6,
      "description": "Wait 60s and 10 pips before recovery"
    },
    "hedge_ratios": {
      "min_ratio": 0.7,
      "max_ratio": 2.0,
      "default_ratio": 1.0
    },
    "dynamic_hedge": {
      "enabled": true,
      "recovery_target_ratio": 0.8,
      "min_hedge_lot": 0.1,
      "max_hedge_lot": 3.0
    },
    "trend_analysis": {
      "enabled": true,
      "periods": 50.0,
      "confidence_threshold": 0.4,
      "use_for_direction": true,
      "enable_chain_on_low_confidence": true,
      "description": "Trend analysis for smart direction selection. Enable chain if confidence < 40%"
    },
    "diversification": {
      "max_usage_per_symbol": 3.0,
      "enforce_limit": true,
      "description": "Max 3 times per symbol"
    },
    "chain_recovery": {
      "enabled": true,
      "mode": "conditional",
      "max_chain_depth": 5.0,
      "min_loss_percent_for_chain": -0.01,
      "only_when_trend_uncertain": true,
      "description": "Conditional chain recovery: enabled only when trend confidence < 40% or as safety net"
    },
    "multi_armed_bandit": {
      "enabled": true,
      "exploration_rate": 0.2,
      "learning_rate": 0.1,
      "description": "Online learning for pair selection optimization"
    },
    "ml_logging": {
      "enabled": true,
      "log_to_database": true,
      "log_market_features": true,
      "log_decision_process": true,
      "upload_to_central": false,
      "description": "Comprehensive logging for ML training"
    },
    "auto_registration": {
      "enabled": true,
      "register_on_startup": true,
      "register_on_new_orders": true,
      "sync_interval_seconds": 30.0,
      "description": "Auto register orders for tracking"
    },
    "smart_recovery_flow": {
      "enabled": true,
      "flow_type": "3_stage",
      "stage_1_arbitrage_enabled": true,
      "stage_2_correlation_enabled": true,
      "stage_3_chain_enabled": true,
      "priority_queue_enabled": true,
      "max_priority_queue_size": 50,
      "smart_cooldown_seconds": 5,
      "description": "Smart Recovery Flow: 3-Stage Process (Arbitrage → Correlation → Chain)"
    },
    "description": "Smart recovery with trend analysis, conditional chain recovery, ML-ready logging, and Smart Recovery Flow"
  },
  "arbitrage_params": {
    "detection": {
      "min_threshold": 0.0001,
      "max_threshold": 0.005,
      "spread_tolerance": 0.5,
      "execution_timeout_ms": 1000
    },
    "triangles": {
      "max_active_triangles": 4.0,
      "triangle_hold_time_minutes": 120.0,
      "correlation_check_interval": 60.0
    },
    "closing": {
      "enable_net_pnl_check": true,
      "min_profit_to_close": 5,
      "min_profit_base": 10.0,
      "min_profit_base_balance": 10000.0,
      "trailing_stop_enabled": true,
      "trailing_stop_distance": 10.0,
      "lock_profit_percentage": 0.5,
      "description": "Min profit $10 @ $10K balance, scales with balance. Trailing stop $10 from peak. Lock 50% of peak."
    },
    "execution": {
      "max_slippage": 0.0005,
      "commission_rate": 0.0001,
      "min_profit_threshold": 0.0001
    },
    "description": "Arbitrage detection and execution parameters"
  },
  "market_analysis": {
    "regime_detection": {
      "analysis_interval_seconds": 300,
      "volatility_periods": 96,
      "trend_periods": 24,
      "correlation_periods": 168
    },
    "thresholds": {
      "volatility": {
        "low": 0.0005,
        "high": 0.002
      },
      "trend_strength": {
        "weak": 0.3,
        "strong": 0.7
      },
      "correlation_stability": {
        "unstable": 0.3,
        "stable": 0.7
      }
    },
    "description": "Market analysis and regime detection parameters"
  },
  "system_limits": {
    "max_concurrent_groups": 6,
    "max_portfolio_risk": 0.15,
    "max_drawdown_percent": 30,
    "max_position_hold_hours": 24,
    "max_recovery_attempts": 3,
    "emergency_stop_loss": 0.2,
    "description": "System-wide limits and safety parameters"
  },
  "performance_monitoring": {
    "metrics": {
      "update_interval_seconds": 60,
      "history_days": 30,
      "alert_thresholds": {
        "min_win_rate": 0.4
      }
    },
    "logging": {
      "log_level": "INFO",
      "log_retention_days": 7,
      "performance_log_interval_minutes": 15
    },
    "description": "Performance monitoring and logging parameters"
  },
  "broker_settings": {
    "connection": {
      "timeout_seconds": 30,
      "retry_attempts": 3,
      "heartbeat_interval_seconds": 60
    },
    "execution": {
      "max_orders_per_minute": 60,
      "order_timeout_seconds": 10,
      "slippage_tolerance": 0.0005
    },
    "data": {
      "refresh_rate_ms": 50,
      "historical_data_limit": 1000,
      "real_time_buffer_size": 100
    },
    "description": "Broker connection and execution settings"
  },
  "system_settings": {
    "engine": {
      "trading_loop_interval_seconds": 30,
      "max_memory_usage_mb": 500,
      "cpu_usage_limit_percent": 20
    },
    "threading": {
      "max_worker_threads": 4,
      "thread_timeout_seconds": 300,
      "queue_size": 100
    },
    "description": "System performance and threading settings"
  }
}